(this.webpackJsonpappcraft=this.webpackJsonpappcraft||[]).push([[12],{2919:function(t,r,e){"use strict";e.r(r),e.d(r,"DebugDraw",(function(){return c}));var o=e(2917),n=e(261),i=e(91),l=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),a=function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,n,i=e.call(t),l=[];try{for(;(void 0===r||r-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return l},c=function(t){function r(r){var e=t.call(this)||this;return e.m_ctx=null,e.half_width=310,e.half_height=450,e.m_ctx=r.getContext("2d"),e.half_width=r.width/2,e.half_height=r.height/2,e}return l(r,t),r.prototype.set_world=function(t){this.world=t},r.prototype.PushTransform=function(t){var r=this.m_ctx;r&&(r.save(),r.translate(Object(i.n)(t.p.x)+this.half_width,Object(i.n)(t.p.y)+this.half_height),r.rotate(t.q.GetAngle()))},r.prototype.PopTransform=function(t){var r=this.m_ctx;r&&r.restore()},r.prototype.DrawPolygon=function(t,r,e){var o=this.m_ctx;if(o){o.beginPath(),o.moveTo(Object(i.n)(t[0].x),Object(i.n)(t[0].y));for(var n=1;n<r;n++)o.lineTo(Object(i.n)(t[n].x),Object(i.n)(t[n].y));o.closePath(),o.strokeStyle=e.MakeStyleString(1),o.stroke()}},r.prototype.DrawSolidPolygon=function(t,r,e){.9===e.r&&e.SetRGB(.9,.9,.9);var o=this.m_ctx;if(o){o.beginPath(),o.moveTo(Object(i.n)(t[0].x),Object(i.n)(t[0].y));for(var n=1;n<r;n++)o.lineTo(Object(i.n)(t[n].x),Object(i.n)(t[n].y));o.closePath(),o.fillStyle=e.MakeStyleString(.1),o.fill(),o.strokeStyle=e.MakeStyleString(1),o.stroke()}},r.prototype.DrawCircle=function(t,r,e){var n=this.m_ctx;n&&(n.beginPath(),n.arc(Object(i.n)(t.x),Object(i.n)(t.y),r,0,2*o.pi,!0),n.strokeStyle=e.MakeStyleString(1),n.stroke())},r.prototype.DrawSolidCircle=function(t,r,e,n){var l=this.m_ctx;if(l){var a=Object(i.n)(t.x),c=Object(i.n)(t.y);l.beginPath(),l.arc(a,c,r,0,2*o.pi,!0),l.moveTo(a,c),l.lineTo(a+e.x*r,c+e.y*r),l.fillStyle=n.MakeStyleString(.5),l.fill(),l.strokeStyle=n.MakeStyleString(1),l.stroke()}},r.prototype.DrawParticles=function(t,r,e,n){if(this.m_ctx)for(var l=0;l<n;++l){var a=t[l],c=(null===e||void 0===e?void 0:e[l])||new o.Color(255,255,255,.5);this.m_ctx.fillStyle=c.MakeStyleString(),this.m_ctx.beginPath(),this.m_ctx.arc(Object(i.n)(a.x),Object(i.n)(a.y),Object(i.n)(r),0,2*o.pi,!0),this.m_ctx.fill()}},r.prototype.DrawParticleTriads=function(t,r){var e;if(this.m_ctx){(null===(e=this.world)||void 0===e?void 0:e.body_list)&&(r=[],this.world.body_list.forEach((function(t){var e,o=t.get_current_physics_body();if(o.type===n.a.ELASTIC){var i=o.particle_group.m_firstIndex;null===(e=o.soft_filter)||void 0===e||e.triangle_top_points.forEach((function(t){r.push([t[0]+i,t[1]+i,t[2]+i])}))}})));for(var o=0;o<r.length;o++){var l=a(r[o],3),c=l[0],s=l[1],f=l[2],y=t[c],h=t[s],p=t[f];y&&h&&p?(this.m_ctx.fillStyle="rgba(0,0,0,0.5)",this.m_ctx.beginPath(),this.m_ctx.moveTo(Object(i.n)(y.x),Object(i.n)(y.y)),this.m_ctx.lineTo(Object(i.n)(h.x),Object(i.n)(h.y)),this.m_ctx.lineTo(Object(i.n)(p.x),Object(i.n)(p.y)),this.m_ctx.closePath(),this.m_ctx.stroke()):console.error("Invalid triangle: ",r[o])}}},r.prototype.DrawSegment=function(t,r,e){var o=this.m_ctx;o&&(o.beginPath(),o.moveTo(Object(i.n)(t.x),Object(i.n)(t.y)),o.lineTo(Object(i.n)(r.x),Object(i.n)(r.y)),o.strokeStyle=e.MakeStyleString(1),o.stroke())},r.prototype.DrawTransform=function(t){var r=this.m_ctx;r&&(this.PushTransform(t),r.beginPath(),r.moveTo(0,0),r.lineTo(1,0),r.strokeStyle=o.Color.RED.MakeStyleString(1),r.stroke(),r.beginPath(),r.moveTo(0,0),r.lineTo(0,1),r.strokeStyle=o.Color.GREEN.MakeStyleString(1),r.stroke(),this.PopTransform(t))},r.prototype.DrawPoint=function(t,r,e){var o=this.m_ctx;if(o){o.fillStyle=e.MakeStyleString();var n=r/2;o.fillRect(t.x-n,t.y-n,r,r)}},r.prototype.DrawString=function(t,e,o){var n=this.m_ctx;if(n){n.save(),n.setTransform(1,0,0,1,0,0),n.font="15px DroidSans";var l=r.DrawString_s_color;n.fillStyle=l.MakeStyleString(),n.fillText(o,Object(i.n)(t),Object(i.n)(e)),n.restore()}},r.prototype.DrawStringWorld=function(t,e,o){var n=this.m_ctx;if(n){var i=r.DrawStringWorld_s_p.Set(t,e);n.save(),n.setTransform(1,0,0,1,0,0),n.font="15px DroidSans";var l=r.DrawStringWorld_s_color;n.fillStyle=l.MakeStyleString(),n.fillText(o,i.x,i.y),n.restore()}},r.prototype.DrawAABB=function(t,r){var e=this.m_ctx;if(e){e.strokeStyle=r.MakeStyleString();var o=Object(i.n)(t.lowerBound.x),n=Object(i.n)(t.lowerBound.y),l=Object(i.n)(t.upperBound.x-t.lowerBound.x),a=Object(i.n)(t.upperBound.y-t.lowerBound.y);e.strokeRect(o,n,l,a)}},r.DrawString_s_color=new o.Color(.9,.6,.6),r.DrawStringWorld_s_p=new o.Vec2,r.DrawStringWorld_s_color=new o.Color(.5,.9,.5),r}(o.Draw)}}]);